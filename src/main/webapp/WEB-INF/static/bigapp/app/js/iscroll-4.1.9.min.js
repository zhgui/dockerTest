/*
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var n=Math,p=function(m){return m>>0;},v=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":(/trident/i).test(navigator.userAgent)?"ms":"opera" in window?"O":"",h=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),k=(/playbook/gi).test(navigator.appVersion),l=(/hp-tablet/gi).test(navigator.appVersion),d="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),e="ontouchstart" in window&&!l,f=v+"Transform" in document.documentElement.style,g=j||k,q=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,1);};})(),b=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;})(),r="onorientationchange" in window?"orientationchange":"resize",s=e?"touchstart":"mousedown",o=e?"touchmove":"mousemove",c=e?"touchend":"mouseup",a=e?"touchcancel":"mouseup",w=v=="Moz"?"DOMMouseScroll":"mousewheel",u="translate"+(d?"3d(":"("),t=d?",0)":")",i=function(x,z){var A=this,m=document,y;A.wrapper=typeof x=="object"?x:m.getElementById(x);A.wrapper.style.overflow="hidden";A.scroller=A.wrapper.children[0];A.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:h,hideScrollbar:j,fadeScrollbar:j&&d,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(B){B.preventDefault();},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(y in z){A.options[y]=z[y];}A.x=A.options.x;A.y=A.options.y;A.options.useTransform=f?A.options.useTransform:false;A.options.hScrollbar=A.options.hScroll&&A.options.hScrollbar;A.options.vScrollbar=A.options.vScroll&&A.options.vScrollbar;A.options.zoom=A.options.useTransform&&A.options.zoom;A.options.useTransition=g&&A.options.useTransition;if(A.options.zoom&&h){u="translate(";t=")";}A.scroller.style[v+"TransitionProperty"]=A.options.useTransform?"-"+v.toLowerCase()+"-transform":"top left";A.scroller.style[v+"TransitionDuration"]="0";A.scroller.style[v+"TransformOrigin"]="0 0";if(A.options.useTransition){A.scroller.style[v+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";}if(A.options.useTransform){A.scroller.style[v+"Transform"]=u+A.x+"px,"+A.y+"px"+t;}else{A.scroller.style.cssText+=";position:absolute;top:"+A.y+"px;left:"+A.x+"px";}if(A.options.useTransition){A.options.fixedScrollbar=true;}A.refresh();A._bind(r,window);A._bind(s);if(!e){A._bind("mouseout",A.wrapper);if(A.options.wheelAction!="none"){A._bind(w);}}if(A.options.checkDOMChanges){A.checkDOMTime=setInterval(function(){A._checkDOMChanges();},500);}};i.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(m){var x=this;switch(m.type){case s:if(!e&&m.button!==0){return;}x._start(m);break;case o:x._move(m);break;case c:case a:x._end(m);break;case r:x._resize();break;case w:x._wheel(m);break;case"mouseout":x._mouseout(m);break;case"webkitTransitionEnd":x._transitionEnd(m);break;}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return;}this.refresh();},_scrollbar:function(x){var z=this,y=document,m;if(!z[x+"Scrollbar"]){if(z[x+"ScrollbarWrapper"]){if(f){z[x+"ScrollbarIndicator"].style[v+"Transform"]="";}z[x+"ScrollbarWrapper"].parentNode.removeChild(z[x+"ScrollbarWrapper"]);z[x+"ScrollbarWrapper"]=null;z[x+"ScrollbarIndicator"]=null;}return;}if(!z[x+"ScrollbarWrapper"]){m=y.createElement("div");if(z.options.scrollbarClass){m.className=z.options.scrollbarClass+x.toUpperCase();}else{m.style.cssText="position:absolute;z-index:100;"+(x=="h"?"height:7px;bottom:1px;left:2px;right:"+(z.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(z.hScrollbar?"7":"2")+"px;top:2px;right:1px");}m.style.cssText+=";pointer-events:none;-"+v+"-transition-property:opacity;-"+v+"-transition-duration:"+(z.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(z.options.hideScrollbar?"0":"1");z.wrapper.appendChild(m);z[x+"ScrollbarWrapper"]=m;m=y.createElement("div");if(!z.options.scrollbarClass){m.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+v+"-background-clip:padding-box;-"+v+"-box-sizing:border-box;"+(x=="h"?"height:100%":"width:100%")+";-"+v+"-border-radius:3px;border-radius:3px";}m.style.cssText+=";pointer-events:none;-"+v+"-transition-property:-"+v+"-transform;-"+v+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+v+"-transition-duration:0;-"+v+"-transform:"+u+"0,0"+t;if(z.options.useTransition){m.style.cssText+=";-"+v+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";}z[x+"ScrollbarWrapper"].appendChild(m);z[x+"ScrollbarIndicator"]=m;}if(x=="h"){z.hScrollbarSize=z.hScrollbarWrapper.clientWidth;z.hScrollbarIndicatorSize=n.max(p(z.hScrollbarSize*z.hScrollbarSize/z.scrollerW),8);z.hScrollbarIndicator.style.width=z.hScrollbarIndicatorSize+"px";z.hScrollbarMaxScroll=z.hScrollbarSize-z.hScrollbarIndicatorSize;z.hScrollbarProp=z.hScrollbarMaxScroll/z.maxScrollX;}else{z.vScrollbarSize=z.vScrollbarWrapper.clientHeight;z.vScrollbarIndicatorSize=n.max(p(z.vScrollbarSize*z.vScrollbarSize/z.scrollerH),8);z.vScrollbarIndicator.style.height=z.vScrollbarIndicatorSize+"px";z.vScrollbarMaxScroll=z.vScrollbarSize-z.vScrollbarIndicatorSize;z.vScrollbarProp=z.vScrollbarMaxScroll/z.maxScrollY;}z._scrollbarPos(x,true);},_resize:function(){var m=this;setTimeout(function(){m.refresh();},h?200:0);},_pos:function(m,z){if(this.zoomed){return;}m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[v+"Transform"]=u+m+"px,"+z+"px"+t+" scale("+this.scale+")";}else{m=p(m);z=p(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px";}this.x=m;this.y=z;this._scrollbarPos("h");this._scrollbarPos("v");},_scrollbarPos:function(m,x){var A=this,y=m=="h"?A.x:A.y,z;if(!A[m+"Scrollbar"]){return;}y=A[m+"ScrollbarProp"]*y;if(y<0){if(!A.options.fixedScrollbar){z=A[m+"ScrollbarIndicatorSize"]+p(y*3);if(z<8){z=8;}A[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=z+"px";}y=0;}else{if(y>A[m+"ScrollbarMaxScroll"]){if(!A.options.fixedScrollbar){z=A[m+"ScrollbarIndicatorSize"]-p((y-A[m+"ScrollbarMaxScroll"])*3);if(z<8){z=8;}A[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=z+"px";y=A[m+"ScrollbarMaxScroll"]+(A[m+"ScrollbarIndicatorSize"]-z);}else{y=A[m+"ScrollbarMaxScroll"];}}}A[m+"ScrollbarWrapper"].style[v+"TransitionDelay"]="0";A[m+"ScrollbarWrapper"].style.opacity=x&&A.options.hideScrollbar?"0":"1";A[m+"ScrollbarIndicator"].style[v+"Transform"]=u+(m=="h"?y+"px,0":"0,"+y+"px")+t;},_start:function(A){var D=this,C=e?A.touches[0]:A,B,E,F,m,z;if(!D.enabled){return;}if(D.options.onBeforeScrollStart){D.options.onBeforeScrollStart.call(D,A);}if(D.options.useTransition||D.options.zoom){D._transitionTime(0);}D.moved=false;D.animating=false;D.zoomed=false;D.distX=0;D.distY=0;D.absDistX=0;D.absDistY=0;D.dirX=0;D.dirY=0;if(D.options.zoom&&e&&A.touches.length>1){m=n.abs(A.touches[0].pageX-A.touches[1].pageX);z=n.abs(A.touches[0].pageY-A.touches[1].pageY);D.touchesDistStart=n.sqrt(m*m+z*z);D.originX=n.abs(A.touches[0].pageX+A.touches[1].pageX-D.wrapperOffsetLeft*2)/2-D.x;D.originY=n.abs(A.touches[0].pageY+A.touches[1].pageY-D.wrapperOffsetTop*2)/2-D.y;if(D.options.onZoomStart){D.options.onZoomStart.call(D,A);}}if(D.options.momentum){if(D.options.useTransform){B=getComputedStyle(D.scroller,null)[v+"Transform"].replace(/[^0-9-.,]/g,"").split(",");E=B[4]*1;F=B[5]*1;}else{E=getComputedStyle(D.scroller,null).left.replace(/[^0-9-]/g,"")*1;F=getComputedStyle(D.scroller,null).top.replace(/[^0-9-]/g,"")*1;}if(E!=D.x||F!=D.y){if(D.options.useTransition){D._unbind("webkitTransitionEnd");}else{b(D.aniTime);}D.steps=[];D._pos(E,F);}}D.absStartX=D.x;D.absStartY=D.y;D.startX=D.x;D.startY=D.y;D.pointX=C.pageX;D.pointY=C.pageY;D.startTime=A.timeStamp||Date.now();if(D.options.onScrollStart){D.options.onScrollStart.call(D,A);}D._bind(o);D._bind(c);D._bind(a);},_move:function(A){var F=this,D=e?A.touches[0]:A,y=D.pageX-F.pointX,z=D.pageY-F.pointY,B=F.x+y,C=F.y+z,m,x,E,G=A.timeStamp||Date.now();if(F.options.onBeforeScrollMove){F.options.onBeforeScrollMove.call(F,A);}if(F.options.zoom&&e&&A.touches.length>1){m=n.abs(A.touches[0].pageX-A.touches[1].pageX);x=n.abs(A.touches[0].pageY-A.touches[1].pageY);F.touchesDist=n.sqrt(m*m+x*x);F.zoomed=true;E=1/F.touchesDistStart*F.touchesDist*this.scale;if(E<F.options.zoomMin){E=0.5*F.options.zoomMin*Math.pow(2,E/F.options.zoomMin);}else{if(E>F.options.zoomMax){E=2*F.options.zoomMax*Math.pow(0.5,F.options.zoomMax/E);}}F.lastScale=E/this.scale;B=this.originX-this.originX*F.lastScale+this.x,C=this.originY-this.originY*F.lastScale+this.y;this.scroller.style[v+"Transform"]=u+B+"px,"+C+"px"+t+" scale("+E+")";if(F.options.onZoom){F.options.onZoom.call(F,A);}return;}F.pointX=D.pageX;F.pointY=D.pageY;if(B>0||B<F.maxScrollX){B=F.options.bounce?F.x+(y/2):B>=0||F.maxScrollX>=0?0:F.maxScrollX;}if(C>F.minScrollY||C<F.maxScrollY){C=F.options.bounce?F.y+(z/2):C>=F.minScrollY||F.maxScrollY>=0?F.minScrollY:F.maxScrollY;}F.distX+=y;F.distY+=z;F.absDistX=n.abs(F.distX);F.absDistY=n.abs(F.distY);if(F.absDistX<6&&F.absDistY<6){return;}if(F.options.lockDirection){if(F.absDistX>F.absDistY+5){C=F.y;z=0;}else{if(F.absDistY>F.absDistX+5){B=F.x;y=0;}}}F.moved=true;F._pos(B,C);F.dirX=y>0?-1:y<0?1:0;F.dirY=z>0?-1:z<0?1:0;if(G-F.startTime>300){F.startTime=G;F.startX=F.x;F.startY=F.y;}if(F.options.onScrollMove){F.options.onScrollMove.call(F,A);}},_end:function(z){if(e&&z.touches.length!=0){return;}var K=this,G=e?z.changedTouches[0]:z,J,A,B={dist:0,time:0},C={dist:0,time:0},y=(z.timeStamp||Date.now())-K.startTime,E=K.x,F=K.y,m,x,D,I,H;K._unbind(o);K._unbind(c);K._unbind(a);if(K.options.onBeforeScrollEnd){K.options.onBeforeScrollEnd.call(K,z);}if(K.zoomed){H=K.scale*K.lastScale;H=Math.max(K.options.zoomMin,H);H=Math.min(K.options.zoomMax,H);K.lastScale=H/K.scale;K.scale=H;K.x=K.originX-K.originX*K.lastScale+K.x;K.y=K.originY-K.originY*K.lastScale+K.y;K.scroller.style[v+"TransitionDuration"]="200ms";K.scroller.style[v+"Transform"]=u+K.x+"px,"+K.y+"px"+t+" scale("+K.scale+")";K.zoomed=false;K.refresh();if(K.options.onZoomEnd){K.options.onZoomEnd.call(K,z);}return;}if(!K.moved){if(e){if(K.doubleTapTimer&&K.options.zoom){clearTimeout(K.doubleTapTimer);K.doubleTapTimer=null;if(K.options.onZoomStart){K.options.onZoomStart.call(K,z);}K.zoom(K.pointX,K.pointY,K.scale==1?K.options.doubleTapZoom:1);if(K.options.onZoomEnd){setTimeout(function(){K.options.onZoomEnd.call(K,z);},200);}}else{K.doubleTapTimer=setTimeout(function(){K.doubleTapTimer=null;J=G.target;while(J.nodeType!=1){J=J.parentNode;}if(J.tagName!="SELECT"&&J.tagName!="INPUT"&&J.tagName!="TEXTAREA"){A=document.createEvent("MouseEvents");A.initMouseEvent("click",true,true,z.view,1,G.screenX,G.screenY,G.clientX,G.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,0,null);A._fake=true;J.dispatchEvent(A);}},K.options.zoom?250:0);}}K._resetPos(200);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,z);}return;}if(y<300&&K.options.momentum){B=E?K._momentum(E-K.startX,y,-K.x,K.scrollerW-K.wrapperW+K.x,K.options.bounce?K.wrapperW:0):B;C=F?K._momentum(F-K.startY,y,-K.y,(K.maxScrollY<0?K.scrollerH-K.wrapperH+K.y-K.minScrollY:0),K.options.bounce?K.wrapperH:0):C;E=K.x+B.dist;F=K.y+C.dist;if((K.x>0&&E>0)||(K.x<K.maxScrollX&&E<K.maxScrollX)){B={dist:0,time:0};}if((K.y>K.minScrollY&&F>K.minScrollY)||(K.y<K.maxScrollY&&F<K.maxScrollY)){C={dist:0,time:0};}}if(B.dist||C.dist){D=n.max(n.max(B.time,C.time),10);if(K.options.snap){m=E-K.absStartX;x=F-K.absStartY;if(n.abs(m)<K.options.snapThreshold&&n.abs(x)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200);}else{I=K._snap(E,F);E=I.x;F=I.y;D=n.max(I.time,D);}}K.scrollTo(p(E),p(F),D);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,z);}return;}if(K.options.snap){m=E-K.absStartX;x=F-K.absStartY;if(n.abs(m)<K.options.snapThreshold&&n.abs(x)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200);}else{I=K._snap(K.x,K.y);if(I.x!=K.x||I.y!=K.y){K.scrollTo(I.x,I.y,I.time);}}if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,z);}return;}K._resetPos(200);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,z);}},_resetPos:function(z){var y=this,m=y.x>=0?0:y.x<y.maxScrollX?y.maxScrollX:y.x,x=y.y>=y.minScrollY||y.maxScrollY>0?y.minScrollY:y.y<y.maxScrollY?y.maxScrollY:y.y;if(m==y.x&&x==y.y){if(y.moved){y.moved=false;if(y.options.onScrollEnd){y.options.onScrollEnd.call(y);}}if(y.hScrollbar&&y.options.hideScrollbar){if(v=="webkit"){y.hScrollbarWrapper.style[v+"TransitionDelay"]="300ms";}y.hScrollbarWrapper.style.opacity="0";}if(y.vScrollbar&&y.options.hideScrollbar){if(v=="webkit"){y.vScrollbarWrapper.style[v+"TransitionDelay"]="300ms";}y.vScrollbarWrapper.style.opacity="0";}return;}y.scrollTo(m,x,z||0);},_wheel:function(z){var A=this,B,C,x,y,m;if("wheelDeltaX" in z){B=z.wheelDeltaX/12;C=z.wheelDeltaY/12;}else{if("wheelDelta" in z){B=C=z.wheelDelta/12;}else{if("detail" in z){B=C=-z.detail*3;}else{return;}}}if(A.options.wheelAction=="zoom"){m=A.scale*Math.pow(2,1/3*(C?C/Math.abs(C):0));if(m<A.options.zoomMin){m=A.options.zoomMin;}if(m>A.options.zoomMax){m=A.options.zoomMax;}if(m!=A.scale){if(!A.wheelZoomCount&&A.options.onZoomStart){A.options.onZoomStart.call(A,z);}A.wheelZoomCount++;A.zoom(z.pageX,z.pageY,m,400);setTimeout(function(){A.wheelZoomCount--;if(!A.wheelZoomCount&&A.options.onZoomEnd){A.options.onZoomEnd.call(A,z);}},400);}return;}x=A.x+B;y=A.y+C;if(x>0){x=0;}else{if(x<A.maxScrollX){x=A.maxScrollX;}}if(y>A.minScrollY){y=A.minScrollY;}else{if(y<A.maxScrollY){y=A.maxScrollY;}}if(A.maxScrollY<0){A.scrollTo(x,y,0);}},_mouseout:function(m){var x=m.relatedTarget;if(!x){this._end(m);return;}while(x=x.parentNode){if(x==this.wrapper){return;}}this._end(m);},_transitionEnd:function(m){var x=this;if(m.target!=x.scroller){return;}x._unbind("webkitTransitionEnd");x._startAni();},_startAni:function(){var C=this,z=C.x,A=C.y,y=Date.now(),B,x,m;if(C.animating){return;}if(!C.steps.length){C._resetPos(400);return;}B=C.steps.shift();if(B.x==z&&B.y==A){B.time=0;}C.animating=true;C.moved=true;if(C.options.useTransition){C._transitionTime(B.time);C._pos(B.x,B.y);C.animating=false;if(B.time){C._bind("webkitTransitionEnd");}else{C._resetPos(0);}return;}m=function(){var F=Date.now(),D,E;if(F>=y+B.time){C._pos(B.x,B.y);C.animating=false;if(C.options.onAnimationEnd){C.options.onAnimationEnd.call(C);}C._startAni();return;}F=(F-y)/B.time-1;x=n.sqrt(1-F*F);D=(B.x-z)*x+z;E=(B.y-A)*x+A;C._pos(D,E);if(C.animating){C.aniTime=q(m);}};m();},_transitionTime:function(m){m+="ms";this.scroller.style[v+"TransitionDuration"]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[v+"TransitionDuration"]=m;}if(this.vScrollbar){this.vScrollbarIndicator.style[v+"TransitionDuration"]=m;}},_momentum:function(x,F,z,y,D){var m=0.0006,E=n.abs(x)/F,A=(E*E)/(2*m),B=0,C=0;if(x>0&&A>z){C=D/(6/(A/E*m));z=z+C;E=E*z/A;A=z;}else{if(x<0&&A>y){C=D/(6/(A/E*m));y=y+C;E=E*y/A;A=y;}}A=A*(x<0?-1:1);B=E/m;return{dist:A,time:p(B)};},_offset:function(m){var x=-m.offsetLeft,y=-m.offsetTop;while(m=m.offsetParent){x-=m.offsetLeft;y-=m.offsetTop;}if(m!=this.wrapper){x*=this.scale;y*=this.scale;}return{left:x,top:y};},_snap:function(F,G){var D=this,m,z,A,E,B,C;A=D.pagesX.length-1;for(m=0,z=D.pagesX.length;m<z;m++){if(F>=D.pagesX[m]){A=m;break;}}if(A==D.currPageX&&A>0&&D.dirX<0){A--;}F=D.pagesX[A];B=n.abs(F-D.pagesX[D.currPageX]);B=B?n.abs(D.x-F)/B*500:0;D.currPageX=A;A=D.pagesY.length-1;for(m=0;m<A;m++){if(G>=D.pagesY[m]){A=m;break;}}if(A==D.currPageY&&A>0&&D.dirY<0){A--;}G=D.pagesY[A];C=n.abs(G-D.pagesY[D.currPageY]);C=C?n.abs(D.y-G)/C*500:0;D.currPageY=A;E=p(n.max(B,C))||200;return{x:F,y:G,time:E};},_bind:function(y,x,m){(x||this.scroller).addEventListener(y,this,!!m);},_unbind:function(y,x,m){(x||this.scroller).removeEventListener(y,this,!!m);},destroy:function(){var m=this;m.scroller.style[v+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(r,window);m._unbind(s);m._unbind(o);m._unbind(c);m._unbind(a);if(!m.options.hasTouch){m._unbind("mouseout",m.wrapper);m._unbind(w);}if(m.options.useTransition){m._unbind("webkitTransitionEnd");}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime);}if(m.options.onDestroy){m.options.onDestroy.call(m);}},refresh:function(){var C=this,z,x,y,m,B=0,A=0;if(C.scale<C.options.zoomMin){C.scale=C.options.zoomMin;}C.wrapperW=C.wrapper.clientWidth||1;C.wrapperH=C.wrapper.clientHeight||1;C.minScrollY=-C.options.topOffset||0;C.scrollerW=p(C.scroller.offsetWidth*C.scale);C.scrollerH=p((C.scroller.offsetHeight+C.minScrollY)*C.scale);C.maxScrollX=C.wrapperW-C.scrollerW;C.maxScrollY=C.wrapperH-C.scrollerH+C.minScrollY;C.dirX=0;C.dirY=0;if(C.options.onRefresh){C.options.onRefresh.call(C);}C.hScroll=C.options.hScroll&&C.maxScrollX<0;C.vScroll=C.options.vScroll&&(!C.options.bounceLock&&!C.hScroll||C.scrollerH>C.wrapperH);C.hScrollbar=C.hScroll&&C.options.hScrollbar;C.vScrollbar=C.vScroll&&C.options.vScrollbar&&C.scrollerH>C.wrapperH;z=C._offset(C.wrapper);C.wrapperOffsetLeft=-z.left;C.wrapperOffsetTop=-z.top;if(typeof C.options.snap=="string"){C.pagesX=[];C.pagesY=[];m=C.scroller.querySelectorAll(C.options.snap);for(x=0,y=m.length;x<y;x++){B=C._offset(m[x]);B.left+=C.wrapperOffsetLeft;B.top+=C.wrapperOffsetTop;C.pagesX[x]=B.left<C.maxScrollX?C.maxScrollX:B.left*C.scale;C.pagesY[x]=B.top<C.maxScrollY?C.maxScrollY:B.top*C.scale;}}else{if(C.options.snap){C.pagesX=[];while(B>=C.maxScrollX){C.pagesX[A]=B;B=B-C.wrapperW;A++;}if(C.maxScrollX%C.wrapperW){C.pagesX[C.pagesX.length]=C.maxScrollX-C.pagesX[C.pagesX.length-1]+C.pagesX[C.pagesX.length-1];}B=0;A=0;C.pagesY=[];while(B>=C.maxScrollY){C.pagesY[A]=B;B=B-C.wrapperH;A++;}if(C.maxScrollY%C.wrapperH){C.pagesY[C.pagesY.length]=C.maxScrollY-C.pagesY[C.pagesY.length-1]+C.pagesY[C.pagesY.length-1];}}}C._scrollbar("h");C._scrollbar("v");if(!C.zoomed){C.scroller.style[v+"TransitionDuration"]="0";C._resetPos(200);}},scrollTo:function(E,F,D,A){var C=this,B=E,m,z;C.stop();if(!B.length){B=[{x:E,y:F,time:D,relative:A}];}for(m=0,z=B.length;m<z;m++){if(B[m].relative){B[m].x=C.x-B[m].x;B[m].y=C.y-B[m].y;}C.steps.push({x:B[m].x,y:B[m].y,time:B[m].time||0});}C._startAni();},scrollToElement:function(m,z){var y=this,x;m=m.nodeType?m:y.scroller.querySelector(m);if(!m){return;}x=y._offset(m);x.left+=y.wrapperOffsetLeft;x.top+=y.wrapperOffsetTop;x.left=x.left>0?0:x.left<y.maxScrollX?y.maxScrollX:x.left;x.top=x.top>y.minScrollY?y.minScrollY:x.top<y.maxScrollY?y.maxScrollY:x.top;z=z===undefined?n.max(n.abs(x.left)*2,n.abs(x.top)*2):z;y.scrollTo(x.left,x.top,z);},scrollToPage:function(m,z,B){var A=this,C,D;B=B===undefined?400:B;if(A.options.onScrollStart){A.options.onScrollStart.call(A);}if(A.options.snap){m=m=="next"?A.currPageX+1:m=="prev"?A.currPageX-1:m;z=z=="next"?A.currPageY+1:z=="prev"?A.currPageY-1:z;m=m<0?0:m>A.pagesX.length-1?A.pagesX.length-1:m;z=z<0?0:z>A.pagesY.length-1?A.pagesY.length-1:z;A.currPageX=m;A.currPageY=z;C=A.pagesX[m];D=A.pagesY[z];}else{C=-A.wrapperW*m;D=-A.wrapperH*z;if(C<A.maxScrollX){C=A.maxScrollX;}if(D<A.maxScrollY){D=A.maxScrollY;}}A.scrollTo(C,D,B);},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(o);this._unbind(c);this._unbind(a);},enable:function(){this.enabled=true;},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd");}else{b(this.aniTime);}this.steps=[];this.moved=false;this.animating=false;},zoom:function(C,D,z,B){var A=this,m=z/A.scale;if(!A.options.useTransform){return;}A.zoomed=true;B=B===undefined?200:B;C=C-A.wrapperOffsetLeft-A.x;D=D-A.wrapperOffsetTop-A.y;A.x=C-C*m+A.x;A.y=D-D*m+A.y;A.scale=z;A.refresh();A.x=A.x>0?0:A.x<A.maxScrollX?A.maxScrollX:A.x;A.y=A.y>A.minScrollY?A.minScrollY:A.y<A.maxScrollY?A.maxScrollY:A.y;A.scroller.style[v+"TransitionDuration"]=B+"ms";A.scroller.style[v+"Transform"]=u+A.x+"px,"+A.y+"px"+t+" scale("+z+")";A.zoomed=false;},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating;}};if(typeof exports!=="undefined"){exports.iScroll=i;}else{window.iScroll=i;}})();